{% extends "base.html" %}

{% block title %}WQP National Results Coverage{% endblock %}

{% block page_style %}
	<style type="text/css" media="screen">
        .options-label {
            font-weight: bold;
            line-height: 200%;
        }
        #map-detail-dialog {
            font-size: small;
        }
        #ui-dialog-title-map-detail-dialog {
            font-size: small;
        }
    </style>
{% endblock %}

{% block page_header_title %}Water Quality Portal National Results Coverage{% endblock %}

{% block page_content %}
	<div id="page-content">
        <div id="data-content">
            <div id="map-options-div">
                <div id="display-options" class="panel">
                    <div class="panel-heading">
                        DISPLAY OPTIONS
                    </div>

                    <div id="display-options-body" class="panel-body">
                        <div id="display-by-div">
                            <span class="options-label">Display by:</span><br />
                            <input type="radio" name="display-by" value="states" checked="checked" />&nbsp;State<br />
                            <input type="radio" name="display-by" value="counties" />&nbsp;County<br />
                            <input type="radio" name="display-by" value="huc8" />&nbsp;HUC 8
                        </div>

                        <div id="date-filter-div">
                            <span class="options-label">Date:</span><br />
                            <input type="radio" name="date" value="past_12_months" />&nbsp;Last 12 months<br />
                            <input type="radio" name="date" value="past_60_months" />&nbsp;Last 5 years<br />
                            <input type="radio" name="date" value="all_time" checked="checked" />&nbsp;All<br />
                        </div>

                        <div id="data-source">
                            <span class="options-label">Source:</span><br />
                            <input type="radio" name="data-source" value="storet"  />&nbsp;EPA Storet
                            <br />
                            <input type="radio" name="data-source" value="nwis" />&nbsp;NWIS
                            <br />
                            <input type="radio" name="data-source" value="all" checked="checked" />&nbsp;All
                            <br />
                        </div>
                    </div>
                </div>
                <div id="legend" class="panel">
                    <div class="panel-heading">
                        MAP LEGEND
                    </div>
                    <div id="legend-img-div" class="panel-body">
                        <span >Number of all discrete samples</span><br />
                        <img id="legend-img" src="" alt="No legend available" />
                    </div>

                </div>
            </div>
            <div id="coverage-map-area"></div>
		</div>
	</div>
{% endblock %}

{% block body_page_script %}
	<script type="text/javascript" src="{{ url_for('portal_ui.static', filename='vendor/OpenLayers/OpenLayers.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('portal_ui.static', filename='vendor/LoadingPanel.js') }}"></script>
    <script type="text/javascript" src="http://maps.stamen.com/js/tile.stamen.js?v1.1.3') }}"></script>
	<script type="text/javascript" src="{{ url_for('bower.static', filename='jquery-ui/jquery-ui.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('bower.static', filename='numeral/min/numeral.min.js') }}"></script>

    {% assets "coverage_js" %}
    	<script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}

    <script type="text/javascript">
        $(document).ready(function(){
            CoverageMap.init('coverage-map-area');

            var display_by = CoverageMap.get_display_by();
            var date_filter = CoverageMap.get_date_filter();
            var source = CoverageMap.get_data_source();

            CoverageMap.updateDataLayerSLD(display_by, date_filter, source);
            CoverageMap.updateLegend($('#legend-img'), display_by, date_filter, source);

            // Clicked event handlers for filter radio buttons
            $('#display-options input:radio').click(function(){
                var display_by = CoverageMap.get_display_by();
                var date_filter = CoverageMap.get_date_filter();
                var source = CoverageMap.get_data_source();

                CoverageMap.updateDataLayerSLD(display_by, date_filter, source);
                CoverageMap.updateLegend($('#legend-img'), display_by, date_filter, source);

                return true;
            });
        });
    </script>
{% endblock %}

